<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù‡Ø§Ù„Ø© X - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #000000;
            --card-bg: #0d0d0d;
            --card-hover: #151515;
            --text-primary: #ffffff;
            --text-secondary: #808080;
            --accent-color: #ff3e3e;
            --live-color: #00ff66;
            --border-color: #1a1a1a;
            --header-bg: rgba(0, 0, 0, 0.9);
            --font-size-base: 16px;
        }

        [data-theme="light"] {
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --card-hover: #f8f9fa;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --accent-color: #d90429;
            --live-color: #2b9348;
            --border-color: #e0e0e0;
            --header-bg: rgba(255, 255, 255, 0.9);
        }

        * {
            margin: 0; padding: 0; box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            transition: background 0.3s;
            overflow-x: hidden;
            padding-bottom: 80px;
            font-size: var(--font-size-base);
        }

        .container { max-width: 480px; margin: 0 auto; min-height: 100vh; position: relative; }

        /* Header */
        .header {
            background: var(--header-bg);
            backdrop-filter: blur(10px);
            padding: 12px 16px;
            position: sticky; top: 0; z-index: 100;
            border-bottom: 1px solid var(--border-color);
        }

        .top-nav { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-weight: 900; font-size: 1.3rem; color: var(--accent-color); }
        .header-actions { display: flex; gap: 8px; }
        .icon-btn { background: var(--card-bg); border: 1px solid var(--border-color); color: var(--text-primary); width: 36px; height: 36px; border-radius: 10px; cursor: pointer; font-size: 1rem; transition: all 0.3s; display: flex; align-items: center; justify-content: center; position: relative; }
        .icon-btn:active { transform: scale(0.95); }
        .badge { position: absolute; top: -5px; right: -5px; background: var(--accent-color); color: white; font-size: 0.6rem; padding: 2px 5px; border-radius: 10px; font-weight: 900; }

        .date-nav { display: flex; justify-content: space-between; align-items: center; margin-top: 12px; }
        .nav-arrow { background: var(--card-bg); border: 1px solid var(--border-color); color: var(--text-primary); width: 34px; height: 34px; border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .date-text { text-align: center; }
        .day-label { font-weight: 800; font-size: 1rem; display: block; }
        .date-sub { font-size: 0.7rem; color: var(--text-secondary); }

        /* Search Bar */
        .search-container { padding: 0 12px; margin-top: 10px; display: none; }
        .search-input { width: 100%; background: var(--card-bg); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px 15px; border-radius: 10px; font-family: inherit; outline: none; }

        /* Content Sections */
        .content-section { display: none; padding: 12px; animation: fadeIn 0.3s ease; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Matches */
        .league-box { margin-bottom: 20px; }
        .league-head { display: flex; align-items: center; gap: 8px; padding: 5px 0 10px; font-size: 0.8rem; font-weight: 700; color: var(--text-secondary); }
        .league-img { width: 20px; height: 20px; object-fit: contain; }
        .fav-star { margin-right: auto; cursor: pointer; color: var(--text-secondary); transition: color 0.2s; }
        .fav-star.active { color: #ffcc00; }

        .match-item {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            padding: 15px 10px;
            margin-bottom: 10px;
            display: flex; align-items: center; justify-content: space-between;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }
        .match-item:active { transform: scale(0.98); background: var(--card-hover); }
        .match-item.important { border-right: 4px solid var(--accent-color); }

        .team-side { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 6px; width: 30%; }
        .logo-box { width: 45px; height: 45px; background: rgba(128,128,128,0.05); border-radius: 12px; padding: 6px; display: flex; align-items: center; justify-content: center; }
        .logo-img { width: 100%; height: 100%; object-fit: contain; }
        .team-name { font-size: 0.75rem; font-weight: 700; text-align: center; width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

        .match-center { flex: 0 0 110px; display: flex; flex-direction: column; align-items: center; }
        .score-row { font-size: 1.6rem; font-weight: 900; display: flex; align-items: center; gap: 8px; }
        .status-tag { font-size: 0.55rem; font-weight: 800; padding: 2px 8px; border-radius: 4px; margin-top: 4px; }
        .tag-live { background: var(--live-color); color: #000; animation: pulse 1s infinite; }
        .tag-upcoming { color: var(--text-secondary); }
        .tag-finished { color: var(--accent-color); }

        @keyframes pulse { 50% { opacity: 0.6; } }

        /* Standings */
        .league-cards-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .league-card { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 14px; padding: 16px; text-align: center; cursor: pointer; transition: all 0.3s; }
        .league-card:active { transform: scale(0.95); }
        .league-card-logo { width: 50px; height: 50px; object-fit: contain; margin-bottom: 10px; }
        .league-card-name { font-size: 0.85rem; font-weight: 700; }
        .league-card-badge { font-size: 0.65rem; color: var(--accent-color); font-weight: 600; }

        /* Standings Detail */
        .standings-detail { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .standings-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 1px solid var(--border-color); }
        .back-btn { background: var(--card-bg); border: 1px solid var(--border-color); color: var(--text-primary); width: 36px; height: 36px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .standings-title { font-weight: 800; font-size: 1rem; color: var(--accent-color); display: flex; align-items: center; gap: 8px; flex: 1; }
        .standings-title img { width: 24px; height: 24px; }
        .standings-table { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 14px; padding: 15px; margin-bottom: 15px; }
        .standings-scroll { overflow-x: auto; border-radius: 10px; }
        table { width: 100%; border-collapse: collapse; font-size: 0.75rem; }
        th { text-align: right; color: var(--text-secondary); padding: 8px 4px; border-bottom: 1px solid var(--border-color); font-weight: 700; }
        td { padding: 10px 4px; border-bottom: 1px solid rgba(128,128,128,0.05); }
        .rank { font-weight: 800; width: 25px; }
        .team-cell { display: flex; align-items: center; gap: 8px; }
        .team-mini-logo { width: 18px; height: 18px; object-fit: contain; }
        .pts { font-weight: 900; color: var(--text-primary); text-align: center; }
        .view-all-btn { background: var(--accent-color); color: #fff; border: none; padding: 12px 16px; border-radius: 10px; font-size: 0.85rem; font-weight: 700; cursor: pointer; width: 100%; margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 8px; }

        /* Settings Overlay */
        .settings-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-color); z-index: 2000;
            display: none; flex-direction: column;
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        .settings-header { padding: 16px; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; gap: 15px; background: var(--header-bg); backdrop-filter: blur(10px); }
        .settings-title { font-weight: 800; font-size: 1.1rem; flex: 1; }
        .settings-content { flex: 1; overflow-y: auto; padding: 16px; }
        .settings-group { margin-bottom: 24px; }
        .settings-group-title { font-size: 0.8rem; color: var(--accent-color); font-weight: 800; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px; }
        .setting-item { display: flex; align-items: center; justify-content: space-between; padding: 14px 0; border-bottom: 1px solid var(--border-color); }
        .setting-info { display: flex; flex-direction: column; gap: 2px; }
        .setting-label { font-weight: 700; font-size: 0.95rem; }
        .setting-desc { font-size: 0.7rem; color: var(--text-secondary); }
        .switch { position: relative; display: inline-block; width: 44px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .4s; border-radius: 24px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--accent-color); }
        input:checked + .slider:before { transform: translateX(20px); }
        select.setting-select { background: var(--card-bg); color: var(--text-primary); border: 1px solid var(--border-color); padding: 6px 10px; border-radius: 8px; font-family: inherit; font-size: 0.8rem; }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: var(--header-bg); backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
            display: flex; justify-content: space-around; padding: 10px 0; z-index: 1000;
        }
        .nav-item { display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--text-secondary); cursor: pointer; font-size: 0.7rem; font-weight: 700; flex: 1; }
        .nav-item.active { color: var(--accent-color); }

        .loader { display: flex; justify-content: center; padding: 50px; color: var(--accent-color); }
        .error { text-align: center; padding: 40px; color: var(--text-secondary); }
        
        /* Toast Notification */
        .toast { position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%); background: var(--accent-color); color: white; padding: 10px 20px; border-radius: 20px; font-size: 0.8rem; font-weight: 700; z-index: 3000; display: none; animation: slideUpToast 0.3s ease; }
        @keyframes slideUpToast { from { bottom: 0; opacity: 0; } to { bottom: 90px; opacity: 1; } }
    </style>
</head>
<body>

<div class="container">
    <header class="header">
        <div class="top-nav">
            <span class="logo">Ù‡Ø§Ù„Ø© X</span>
            <div class="header-actions">
                <button class="icon-btn" id="themeToggle"><i class="fas fa-moon"></i></button>
                <button class="icon-btn" onclick="toggleSettings()"><i class="fas fa-cog"></i></button>
            </div>
        </div>
        <div class="date-nav" id="dateNav">
            <button class="nav-arrow" onclick="changeDate(-1)"><i class="fas fa-chevron-right"></i></button>
            <div class="date-text">
                <span class="day-label" id="dayLabel">Ø§Ù„ÙŠÙˆÙ…</span>
                <span class="date-sub" id="dateSub"></span>
            </div>
            <button class="nav-arrow" onclick="changeDate(1)"><i class="fas fa-chevron-left"></i></button>
        </div>
    </header>

    <div id="matchesSection" class="content-section active">
        <div id="matchesList">
            <div class="loader"><i class="fas fa-spinner fa-spin fa-2x"></i></div>
        </div>
    </div>

    <div id="standingsSection" class="content-section">
        <div id="standingsList">
            <div class="loader"><i class="fas fa-spinner fa-spin fa-2x"></i></div>
        </div>
    </div>

    <!-- Settings Overlay -->
    <div id="settingsOverlay" class="settings-overlay">
        <div class="settings-header">
            <button class="icon-btn" onclick="toggleSettings()"><i class="fas fa-arrow-right"></i></button>
            <span class="settings-title">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
        </div>
        <div class="settings-content">
            <!-- Group 1: Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® -->
            <div class="settings-group">
                <div class="settings-group-title">Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®</div>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆÙ‚Øª</span>
                        <span class="setting-desc">ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ù†Ø¸Ø§Ù… 12 Ø³Ø§Ø¹Ø© Ùˆ 24 Ø³Ø§Ø¹Ø©</span>
                    </div>
                    <select class="setting-select" id="timeFormat" onchange="updateSetting('timeFormat', this.value)">
                        <option value="12">12 Ø³Ø§Ø¹Ø©</option>
                        <option value="24">24 Ø³Ø§Ø¹Ø©</option>
                    </select>
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø¯ÙˆÙ„Ø©</span>
                        <span class="setting-desc">Ø§Ø®ØªØ± ØªÙˆÙ‚ÙŠØª Ø¯ÙˆÙ„ØªÙƒ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                    </div>
                    <select class="setting-select" id="timeZone" onchange="updateSetting('timeZone', this.value)">
                        <option value="+03:00">Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© / Ù…ØµØ± / Ø§Ù„Ø¹Ø±Ø§Ù‚</option>
                        <option value="+04:00">Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª / Ø¹Ù…Ø§Ù†</option>
                        <option value="+01:00">Ø§Ù„Ù…ØºØ±Ø¨ / ØªÙˆÙ†Ø³ / Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option>
                        <option value="+02:00">Ù„ÙŠØ¨ÙŠØ§ / ÙÙ„Ø³Ø·ÙŠÙ† / Ù„Ø¨Ù†Ø§Ù†</option>
                    </select>
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
                        <span class="setting-desc">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="autoRefresh" onchange="updateSetting('autoRefresh', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <!-- Group 2: Ø§Ù„Ù…Ø¸Ù‡Ø± -->
            <div class="settings-group">
                <div class="settings-group-title">Ø§Ù„Ù…Ø¸Ù‡Ø± ÙˆØ§Ù„ØªØµÙ…ÙŠÙ…</div>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
                        <span class="setting-desc">ØªØºÙŠÙŠØ± Ø§Ù„Ø«ÙŠÙ… Ø­Ø³Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="autoTheme" onchange="updateSetting('autoTheme', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">Ù„ÙˆÙ† Ø§Ù„ØªÙ…ÙŠÙŠØ²</span>
                        <span class="setting-desc">ØªØºÙŠÙŠØ± Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ù…ÙˆÙ‚Ø¹</span>
                    </div>
                    <select class="setting-select" id="accentColor" onchange="updateSetting('accentColor', this.value)">
                        <option value="#ff3e3e">Ø£Ø­Ù…Ø±</option>
                        <option value="#007bff">Ø£Ø²Ø±Ù‚</option>
                        <option value="#00ff66">Ø£Ø®Ø¶Ø±</option>
                        <option value="#ffcc00">Ø£ØµÙØ±</option>
                    </select>
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</span>
                        <span class="setting-desc">ØªÙƒØ¨ÙŠØ± Ø£Ùˆ ØªØµØºÙŠØ± Ù†ØµÙˆØµ Ø§Ù„Ù…ÙˆÙ‚Ø¹</span>
                    </div>
                    <select class="setting-select" id="fontSize" onchange="updateSetting('fontSize', this.value)">
                        <option value="small">ØµØºÙŠØ±</option>
                        <option value="medium">Ù…ØªÙˆØ³Ø·</option>
                        <option value="large">ÙƒØ¨ÙŠØ±</option>
                    </select>
                </div>
            </div>

            <!-- Group 3: Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª -->
            <div class="settings-group">
                <div class="settings-group-title">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</div>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ù‡Ø¯Ø§Ù</span>
                        <span class="setting-desc">Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ù‡Ø¯Ù</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="goalNotify" onchange="updateSetting('goalNotify', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">ØµÙˆØª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span>
                        <span class="setting-desc">ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø¹Ù†Ø¯ Ø­Ø¯ÙˆØ« ØªØºÙŠÙŠØ±</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="soundNotify" onchange="updateSetting('soundNotify', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <!-- Group 4: Ø®ÙŠØ§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (ØªÙƒÙ…Ù„Ø© Ø§Ù„Ù€ 25) -->
            <div class="settings-group">
                <div class="settings-group-title">Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©</span></div><label class="switch"><input type="checkbox" onchange="updateSetting('hideFinished', this.checked)"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">Ø¹Ø±Ø¶ Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¯ÙˆØ±ÙŠØ§Øª</span></div><label class="switch"><input type="checkbox" checked onchange="updateSetting('showLeagueLogos', this.checked)"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø£Ù‡Ù…ÙŠØ©</span></div><label class="switch"><input type="checkbox" checked onchange="updateSetting('sortByImportance', this.checked)"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">ØªÙˆÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span></div><label class="switch"><input type="checkbox" onchange="updateSetting('dataSaver', this.checked)"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">Ø¹Ø±Ø¶ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</span></div><label class="switch"><input type="checkbox" onchange="updateSetting('showPlayers', this.checked)"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">ØªÙ†Ø¨ÙŠÙ‡ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</span></div><label class="switch"><input type="checkbox" checked onchange="updateSetting('startNotify', this.checked)"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">ØªÙ†Ø¨ÙŠÙ‡ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</span></div><label class="switch"><input type="checkbox" onchange="updateSetting('endNotify', this.checked)"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ù†Ø§Ù‚Ù„Ø©</span></div><label class="switch"><input type="checkbox" checked onchange="updateSetting('showChannels', this.checked)"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ù„Ù‚ÙŠÙ†</span></div><label class="switch"><input type="checkbox" onchange="updateSetting('showCommentators', this.checked)"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">Ø§Ù„Ù„ØºØ© (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©/English)</span></div><select class="setting-select"><option>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option><option>English</option></select></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">Ø­ÙØ¸ Ø³Ø¬Ù„ Ø§Ù„Ø¨Ø­Ø«</span></div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²</span></div><label class="switch"><input type="checkbox"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">Ø¹Ø±Ø¶ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</span></div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</span></div><label class="switch"><input type="checkbox"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ù„ÙÙŠØ©</span></div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·</span></div><label class="switch"><input type="checkbox"><span class="slider"></span></label></div>
                <div class="setting-item"><div class="setting-info"><span class="setting-label">Ù…Ø³Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª</span></div><button class="setting-select" onclick="localStorage.clear(); location.reload();">Ù…Ø³Ø­</button></div>
            </div>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('matches', this)">
            <i class="fas fa-calendar-alt"></i>
            <span>Ø§Ù„Ø¬Ø¯ÙˆÙ„</span>
        </div>
        <div class="nav-item" onclick="switchTab('standings', this)">
            <i class="fas fa-list-ol"></i>
            <span>Ø§Ù„ØªØ±ØªÙŠØ¨</span>
        </div>
    </nav>
</div>

<script>
let currentDay = new Date();
const API_DOMAIN = "https://www.yanb8.com";
const ASSETS_DOMAIN = "https://www.yanb8.com";
let matchesData = [];
let settings = JSON.parse(localStorage.getItem('userSettings')) || {
    timeFormat: '12',
    timeZone: '+03:00',
    autoRefresh: true,
    accentColor: '#ff3e3e',
    fontSize: 'medium'
};

// Initialize Settings
function initSettings() {
    document.getElementById('timeFormat').value = settings.timeFormat;
    document.getElementById('timeZone').value = settings.timeZone;
    document.getElementById('autoRefresh').checked = settings.autoRefresh;
    document.getElementById('accentColor').value = settings.accentColor;
    document.documentElement.style.setProperty('--accent-color', settings.accentColor);
}

function updateSetting(key, value) {
    settings[key] = value;
    localStorage.setItem('userSettings', JSON.stringify(settings));
    if (key === 'accentColor') document.documentElement.style.setProperty('--accent-color', value);
    if (key === 'timeFormat' || key === 'timeZone') loadMatches();
}

function toggleSettings() {
    const overlay = document.getElementById('settingsOverlay');
    overlay.style.display = overlay.style.display === 'flex' ? 'none' : 'flex';
}

// Theme Logic
const themeBtn = document.getElementById('themeToggle');
const savedTheme = localStorage.getItem('theme') || 'dark';
document.documentElement.setAttribute('data-theme', savedTheme);
themeBtn.innerHTML = savedTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';

themeBtn.onclick = () => {
    let theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
    themeBtn.innerHTML = theme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
};

function formatDate(date) { 
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}-${month}-${day}`;
}

// Ø¯Ø§Ù„Ø© getDayLabel Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªØ§Ø±ÙŠØ®
function getDayLabel(date) {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const compareDate = new Date(date);
    compareDate.setHours(0, 0, 0, 0);
    
    const diff = Math.round((compareDate - today) / (1000 * 60 * 60 * 24));
    
    if (diff === 0) return "Ø§Ù„ÙŠÙˆÙ…";
    if (diff === 1) return "ØºØ¯Ø§Ù‹";
    if (diff === -1) return "Ø£Ù…Ø³";
    
    return date.toLocaleDateString('ar-EG', { weekday: 'long' });
}

// Ø¯Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„
function updateDateDisplay() {
    document.getElementById('dayLabel').textContent = getDayLabel(currentDay);
    document.getElementById('dateSub').textContent = currentDay.toLocaleDateString('ar-EG', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
}

function switchTab(tab, el) {
    document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
    el.classList.add('active');
    if (tab === 'matches') {
        document.getElementById('matchesSection').classList.add('active');
        document.getElementById('dateNav').style.display = 'flex';
        loadMatches();
    } else {
        document.getElementById('standingsSection').classList.add('active');
        document.getElementById('dateNav').style.display = 'none';
        loadStandings();
    }
}

async function loadMatches() {
    const list = document.getElementById('matchesList');
    list.innerHTML = '<div class="loader"><i class="fas fa-spinner fa-spin fa-2x"></i></div>';
    
    // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø£ÙˆÙ„Ø§Ù‹
    updateDateDisplay();
    
    const dateStr = formatDate(currentDay);
    
    // Use the new API with user timezone
    const url = `${API_DOMAIN}/api/matches/?date=${dateStr}&lang=27&time=${encodeURIComponent(settings.timeZone)}`;
    try {
        const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}&_=${Date.now()}`;
        const res = await fetch(proxyUrl);
        const json = await res.json();
        const data = JSON.parse(json.contents);
        matchesData = data["STING-WEB-Matches"] || [];
        renderMatches(matchesData);
    } catch (e) {
        list.innerHTML = '<div class="error"><p>ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª</p></div>';
    }
}

function formatMatchTime(isoString) {
    const date = new Date(isoString);
    let hours = date.getHours();
    const minutes = date.getMinutes().toString().padStart(2, '0');
    
    if (settings.timeFormat === '12') {
        const ampm = hours >= 12 ? 'Ù…' : 'Øµ';
        hours = hours % 12;
        hours = hours ? hours : 12;
        return `${hours}:${minutes} ${ampm}`;
    }
    return `${hours.toString().padStart(2, '0')}:${minutes}`;
}

function renderMatches(matches) {
    const list = document.getElementById('matchesList');
    if (!matches.length) { list.innerHTML = '<div class="error">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…</div>'; return; }

    const groups = {};
    matches.forEach(m => {
        if (!groups[m["Cup-Name"]]) groups[m["Cup-Name"]] = { logo: m["Cup-Logo"], list: [] };
        groups[m["Cup-Name"]].list.push(m);
    });

    let html = '';
    for (let league in groups) {
        html += `<div class="league-box">
            <div class="league-head">
                <img src="${ASSETS_DOMAIN}${groups[league].logo}" class="league-img" onerror="this.style.display='none'">
                <span>${league}</span>
            </div>`;
        groups[league].list.forEach(m => {
            const isFinished = m["Match-Status"] === "Ø§Ù†ØªÙ‡Øª";
            const isLive = !isFinished && (m["Match-Status"] === "Ø¬Ø§Ø±ÙŠØ© Ø§Ù„Ø¢Ù†" || m["Time-Now"] > 0);
            let center = '';
            if (isLive || isFinished) {
                center = `<div class="score-row"><span>${m["Team-Right"].Goal}</span><span style="color:#444; font-size:0.8rem;">-</span><span>${m["Team-Left"].Goal}</span></div>
                          <div class="status-tag ${isLive ? 'tag-live' : 'tag-finished'}">${isLive ? (m["Time-Now"] + "'") : m["Match-Status"]}</div>`;
            } else {
                const time = formatMatchTime(m["Time-Start"]);
                center = `<div style="font-weight:900; font-size:1rem;">${time}</div><div class="status-tag tag-upcoming" style="font-size:0.5rem;">Ù„Ù… ØªØ¨Ø¯Ø£</div>`;
            }
            html += `<div class="match-item">
                <div class="team-side"><div class="logo-box"><img src="${ASSETS_DOMAIN}${m["Team-Right"].Logo}" class="logo-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/53/53254.png'"></div><span class="team-name">${m["Team-Right"].Name}</span></div>
                <div class="match-center">${center}</div>
                <div class="team-side"><div class="logo-box"><img src="${ASSETS_DOMAIN}${m["Team-Left"].Logo}" class="logo-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/53/53254.png'"></div><span class="team-name">${m["Team-Left"].Name}</span></div>
            </div>`;
        });
        html += '</div>';
    }
    list.innerHTML = html;
}

// Standings Logic
const leaguesList = [
    { "id": "eng.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ", "logo": "https://a.espncdn.com/i/leaguelogos/soccer/500/23.png", "badge": "ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿" },
    { "id": "esp.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ", "logo": "https://a.espncdn.com/i/leaguelogos/soccer/500/15.png", "badge": "ğŸ‡ªğŸ‡¸" },
    { "id": "ita.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ", "logo": "https://a.espncdn.com/i/leaguelogos/soccer/500/12.png", "badge": "ğŸ‡®ğŸ‡¹" },
    { "id": "ger.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠ", "logo": "https://a.espncdn.com/i/leaguelogos/soccer/500/10.png", "badge": "ğŸ‡©ğŸ‡ª" },
    { "id": "fra.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙØ±Ù†Ø³ÙŠ", "logo": "https://a.espncdn.com/i/leaguelogos/soccer/500/9.png", "badge": "ğŸ‡«ğŸ‡·" },
    { "id": "por.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨Ø±ØªØºØ§Ù„ÙŠ", "logo": "https://a.espncdn.com/i/leaguelogos/soccer/500/14.png", "badge": "ğŸ‡µğŸ‡¹" },
    { "id": "ned.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù‡ÙˆÙ„Ù†Ø¯ÙŠ", "logo": "https://upload.wikimedia.org/wikipedia/ar/8/88/Eredivisie_logo.png", "badge": "ğŸ‡³ğŸ‡±" },
    { "id": "bra.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„ÙŠ", "logo": "https://a.espncdn.com/i/leaguelogos/soccer/500/85.png", "badge": "ğŸ‡§ğŸ‡·" },
    { "id": "arg.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†ÙŠ", "logo": "https://a.espncdn.com/i/leaguelogos/soccer/500/1.png", "badge": "ğŸ‡¦ğŸ‡·" },
    { "id": "mex.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…ÙƒØ³ÙŠÙƒÙŠ", "logo": "https://a.espncdn.com/i/leaguelogos/soccer/500/83.png", "badge": "ğŸ‡²ğŸ‡½" },
    { "id": "jpn.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠ", "logo": "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/J.League.svg/960px-J.League.svg.png", "badge": "ğŸ‡¯ğŸ‡µ" },
    { "id": "rus.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø±ÙˆØ³ÙŠ", "logo": "https://upload.wikimedia.org/wikipedia/ar/9/92/Russian_Premier_League_Logo.png", "badge": "ğŸ‡·ğŸ‡º" },
    { "id": "bel.1", "name": "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠ", "logo": "https://a.espncdn.com/i/leaguelogos/soccer/500/86.png", "badge": "ğŸ‡§ğŸ‡ª" }
];

async function loadStandings() {
    const list = document.getElementById('standingsList');
    list.innerHTML = '<div class="loader"><i class="fas fa-spinner fa-spin fa-2x"></i></div>';
    let html = '<div class="league-cards-grid">';
    leaguesList.forEach(l => {
        html += `<div class="league-card" onclick="showLeagueStandings('${l.id}', '${l.name}', '${l.logo}')">
            <img src="${l.logo}" class="league-card-logo">
            <div class="league-card-name">${l.name}</div>
            <div class="league-card-badge">${l.badge}</div>
        </div>`;
    });
    html += '</div>';
    list.innerHTML = html;
}

let currentStandingsData = {};
let showingAllStandings = false;

async function showLeagueStandings(id, name, logo) {
    const list = document.getElementById('standingsList');
    list.innerHTML = `<div class="standings-detail"><div class="standings-header"><button class="back-btn" onclick="loadStandings()"><i class="fas fa-arrow-right"></i></button><div class="standings-title"><img src="${logo}"><span>${name}</span></div></div><div class="loader"><i class="fas fa-spinner fa-spin fa-2x"></i></div></div>`;
    
    try {
        const url = `https://site.api.espn.com/apis/v2/sports/soccer/${id}/standings`;
        const res = await fetch(url);
        const data = await res.json();
        const standings = data.children[0].standings.entries;
        currentStandingsData = { standings, name, logo, id };
        showingAllStandings = false;
        renderStandingsTable();
    } catch (e) {
        list.innerHTML = '<div class="error">ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ±ØªÙŠØ¨</div>';
    }
}

function renderStandingsTable() {
    const list = document.getElementById('standingsList');
    const { standings, name, logo } = currentStandingsData;
    const display = showingAllStandings ? standings : standings.slice(0, 10);
    
    let html = `<div class="standings-detail">
        <div class="standings-header"><button class="back-btn" onclick="loadStandings()"><i class="fas fa-arrow-right"></i></button><div class="standings-title"><img src="${logo}"><span>${name}</span></div></div>
        <div class="standings-table"><div class="standings-scroll"><table><thead><tr><th>#</th><th>Ø§Ù„ÙØ±ÙŠÙ‚</th><th>Ù„Ø¹Ø¨</th><th>Ù†Ù‚Ø§Ø·</th></tr></thead><tbody>`;
    
    display.forEach((e, i) => {
        const stats = e.stats;
        const played = stats.find(s => s.name === "gamesPlayed")?.value || 0;
        const pts = stats.find(s => s.name === "points")?.value || 0;
        const rank = stats.find(s => s.name === "rank")?.value || (i+1);
        html += `<tr><td class="rank">${rank}</td><td class="team-cell"><img src="${e.team.logos[0].href}" class="team-mini-logo"><span>${e.team.displayName}</span></td><td>${played}</td><td class="pts">${pts}</td></tr>`;
    });
    
    html += `</tbody></table></div></div>`;
    if (standings.length > 10) {
        html += `<button class="view-all-btn" onclick="toggleAllStandings()">${showingAllStandings ? 'Ø¥Ø®ÙØ§Ø¡' : 'Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„'}</button>`;
    }
    list.innerHTML = html;
}

function toggleAllStandings() {
    showingAllStandings = !showingAllStandings;
    renderStandingsTable();
}

// Ø¯Ø§Ù„Ø© changeDate Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©
function changeDate(n) {
    const newDate = new Date(currentDay);
    newDate.setDate(newDate.getDate() + n);
    currentDay = newDate;
    loadMatches();
}

// Auto Refresh
setInterval(() => {
    if (settings.autoRefresh && document.getElementById('matchesSection').classList.contains('active')) {
        loadMatches();
    }
}, 60000);

// Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    initSettings();
    updateDateDisplay();
    loadMatches();
});
</script>
</body>
</html>
